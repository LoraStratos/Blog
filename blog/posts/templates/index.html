{% extends 'base.html' %}

{% block navigation %}
    {% if user.is_authenticated %}
        <h3>{{ user.username }}</h3>
        <a href="{% url 'index' %}"><p>Главная</p></a>
        <a href="{% url 'all_user' %}"><p>Все пользователи</p></a>
        <a href="{% url 'profile' request.user.id %}"><p>Профиль</p></a>
        <a href="{% url 'logout' %}"><p>Выйти</p></a>
        <a href="{% url 'delete' request.user.id %}"><p>Удалить пользователя</p></a>
    {% else %}
        <a href="{% url 'index' %}"><p>Главная</p></a>
        <a href="{% url 'all_user' %}"><p>Все пользователи</p></a>
        <a href="{% url 'registration' %}"><p>Регистрация</p></a>
        <a href="{% url 'login' %}"><p>Войти</p></a>
    {% endif %}
{% endblock %}

{% block content %}
    <h1>{{ title }}</h1>
    <h2>Последние 50 сообщений </h2>
    {% for i in page_object %}
        <p><b>{{ i.username }}</b> пишет: <b>{{ i.destination }}</b></p>
            <p>(<b>Дата комментария:</b> {{ i.date }})</p>
            <p>{{ i.text }}</p>
            {% if i.image %}
                <img style="width: 300px; height: 300px;" src="{{ i.image.url }}" alt="Изображение коментария">
            {% endif %}
            <br><br>
        {% if i.username.username == request.user.username or i.destination == request.user.username %}
                <p>
                    <a href="{% url 'edit' i.pk %}?return_key={{ user_object.pk }}" >Редактировать</a>
                    <a href="{% url 'del_confirm' i.pk %}?return_key={{ user_object.pk }}" >Удалить</a>
                </p>
        {% endif %}
    <hr>
    {% endfor %}

    <ul class="pagination">
    {% if page_object.has_other_pages %}
        {% for j in page_object.paginator.page_range %}
            {% if j == number_of_page %}
                <li><div>{{ j }}</div></li>
            {% else %}
                <a href="{% url 'index' %}?page_number={{ j }}"><li class="pag_ref"><div>{{ j }}</div></li></a>
            {% endif %}
        {% endfor %}
    {% endif %}
    </ul>
{% endblock %}